<link rel="import" href="../bower_components/core-selector/core-selector.html">
<link rel="import" href="../bower_components/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../bower_components/core-animation/core-animation.html">
<link rel="import" href="../snowflake-components/snowflake-gameview-details.html">
<link rel="import" href="unresolved-img.html">


<link rel="import" href="../bower_components/core-selector/core-selector.html">
<polymer-element name="materia-gameview-details">
	<template>
	<style>
	:host{
		font-family: sans-serif;
		-webkit-user-select: none;
	}
	#wrapperGameBoxart{
		position: absolute;
		bottom: 330px;
		right: 10%;
	}
	#wrapperMain{
		width: 100%;
		position: absolute;
		bottom: 15%;
		height: 100%;
		pointer-events: none;
	}
	#wrapperGameDescription{
		position: absolute;
		bottom: 0;
		width: 100%;
	}
	#wrapperGameDescription > div{
		width: 90%;
	}
	#gameListContainer{
		box-shadow: -10px 0px 30px 1px rgba(0,0,0,0.75);
	}
	#gameDescription{
		height: 300px;
		clear: both;
		margin-top: 100px;
		word-wrap: break-word;
		padding-left: 10px;
		
	}
	#gameDescription p{
		height: 100%;
		overflow-y: auto;
		pointer-events: auto !important;
	}
	#gamelaunch-tab{
		width: 100%;
	}
	#gameListContainer{
		height: 100%;
		display: inline;
		float: left;
		background: #eee;
	}
	#gameDetails{
		margin-left: 0px;
	}
	#gameStats{
		width: 20%;
		text-align: left;
		margin-bottom: 10px;
		display: block;
		padding: 10px;
	}
	#wrapperGameTitle{
		font-size: 2em;
		margin: 10px 0;
	}
	#wrapperGameTitle h1{
		margin: 10px;
	}
	#gameBoxart{
		width: auto;
		height: 600px;
	}
	#gameBoxart unresolved-img::shadow img{
		max-height: 100%;
		width: auto;
		display: block;
	}
	.launch-tab{
		padding: 2px 5px;
		display: block;
		margin-bottom: 10px;
	}
	.launch-tab a{
		margin: 0;
		vertical-align: middle;
		text-decoration: none;
		font-size: 2em;
	}
	.float-left{
			float: left;
	}
	.float-right{
			float: right;
	}
	.clear-both{
			clear: both;
	}
	.clear-right{
			clear: right;
	}
	.clear-left{
			clear: left;
	}
	.gameItem{
		padding: 10px;
	}
	.gameItem:hover{
		background: #ddd;
	}
	.gameItem.core-selected{
		background: #fff;
	}
	#background{
		position: fixed;
		height: 100%;
		width: 100%;
		z-index: -99999;
		-webkit-filter: blur(5px);
	}
	#background::shadow img{
		transition: opacity ease-in 1s;
	}
	:host /deep/ .card{
		background: #fff;
		border-radius: 2px;
		box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
	}

	
	</style>
	<core-drawer-panel>
	<div id="gameListContainer" drawer>
		<core-selector id="gameList" selected="0" on-core-select="{{gameSelect}}">
			<template repeat="{{game, gameIndex in games}}">
				<div class="gameItem" index="{{gameIndex}}" name="{{game.Name}}">{{game.Name}}</div>
			</template>
		</core-selector>
	</div>

	<div id="gameDetails" main>
			<unresolved-img id="background" src="{{game.Images.Fanarts[0][1]}}"></unresolved-img>
			<div id="gamelaunch-tab" class="float-left">
				<div id="wrapperGameTitle" class="launch-tab float-left clear-both card slide-left">
					<h1 id="gameTitle">
					{{game.Name}}
					</h1>
				</div>
				<div class="launch-tab card float-left clear-both slide-left">
					<a href="#snowflake://run/{{game.UUID}}">
						Play
					</a>
				</div>
				<div class="launch-tab card float-left clear-both slide-left">
					<a href="#snowflake://config/{{game.UUID}}">
						Configure
					</a>
				</div>
			</div>
			<div id="wrapperMain">
				<div id="wrapperGameDescription">
					<div class="float-left clear-left">
					<div id="wrapperGameBoxart">
						<div id="gameBoxart" class="float-right clear-both">
								<unresolved-img unresolved src="{{game.Images.Boxarts.snowflake_img_boxart_front[1]}}" class="card"></unresolved-img>
								<paper-shadow z="1"></paper-shadow></img>
						</div>
					</div>
						<div id="gameStats" class="card float-left clear-both>
							<paper-shadow z="1"><paper-shadow>
							<table>
									<tr>
										<th scope="row">Publisher</th>
										<td>{{game.Metadata.snowflake_game_publisher}}</td>
									</tr>
									<tr>
										<th scope="row">Developer</th>
										<td>{{game.Metadata.snowflake_game_developer}}</td>
									</tr>
									<tr>
										<th scope="row">Release Date</th>
										<td>{{game.Metadata.snowflake_game_releasedate}}</td>
									</tr>
							</table>
						</div><br />
						<div id="gameDescription" class="card">
							<p>
								{{game.Metadata.snowflake_game_description}}
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		</core-drawer-panel>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

	</template>
	
	<script>
		Polymer('materia-gameview-details', {
			created: function() {
			
			this.games = [
    {
        "PlatformId": "NINTENDO_NES",
        "Name": "Super Mario Bros.",
        "Images": {
            "Fanarts": [
                [
                    "fanart_0",
                    "http://thegamesdb.net/banners/fanart/original/140-1.jpg"
                ],
                [
                    "fanart_1",
                    "http://thegamesdb.net/banners/fanart/original/140-10.jpg"
                ],
                [
                    "fanart_2",
                    "http://thegamesdb.net/banners/fanart/original/140-11.jpg"
                ],
                [
                    "fanart_3",
                    "http://thegamesdb.net/banners/fanart/original/140-12.jpg"
                ],
                [
                    "fanart_4",
                    "http://thegamesdb.net/banners/fanart/original/140-13.jpg"
                ],
                [
                    "fanart_5",
                    "http://thegamesdb.net/banners/fanart/original/140-14.jpg"
                ],
                [
                    "fanart_6",
                    "http://thegamesdb.net/banners/fanart/original/140-2.jpg"
                ],
                [
                    "fanart_7",
                    "http://thegamesdb.net/banners/fanart/original/140-3.jpg"
                ],
                [
                    "fanart_8",
                    "http://thegamesdb.net/banners/fanart/original/140-4.jpg"
                ],
                [
                    "fanart_9",
                    "http://thegamesdb.net/banners/fanart/original/140-5.jpg"
                ],
                [
                    "fanart_10",
                    "http://thegamesdb.net/banners/fanart/original/140-7.jpg"
                ],
                [
                    "fanart_11",
                    "http://thegamesdb.net/banners/fanart/original/140-8.jpg"
                ],
                [
                    "fanart_12",
                    "http://thegamesdb.net/banners/fanart/original/140-9.jpg"
                ]
            ],
            "Screenshots": [
                [
                    "screenshot_0",
                    "http://thegamesdb.net/banners/screenshots/140-1.jpg"
                ]
            ],
            "Boxarts": {
                "snowflake_img_boxart_front": [
                    "boxart_front",
                    "http://thegamesdb.net/banners/boxart/original/front/140-1.jpg"
                ],
                "snowflake_img_boxart_back": [
                    "boxart_back",
                    "http://thegamesdb.net/banners/boxart/original/back/140-2.jpg"
                ]
            },
            "CachePath": "C:\\Users\\Ronny\\AppData\\Roaming\\Snowflake\\data\\imagescache",
            "ImagesID": "QYL0Q9y-f0ymisLb0WX6Hg"
        },
        "Metadata": {
            "snowflake_game_description": "The player takes the role of Mario, or in the case of a second player, Mario's brother Luigi. The ultimate objective is to race through the worlds of the Mushroom Kingdom, evade or eliminate Bowser's forces, and save the Princess",
            "snowflake_game_title": "Super Mario Bros.",
            "snowflake_game_releasedate": "09/13/1985",
            "snowflake_game_publisher": "Nintendo",
            "snowflake_game_developer": "Nintendo"
        },
        "UUID": "sWJznptYf0m_qH0_OvHtSg",
        "FileName": "dummysmb.nes",
        "Settings": {}
    }
];
			},
			domReady: function() {
				this.game = this.games['0'];
			},
			gameSelect: function(e, detail) {
				if (detail.isSelected) {
					this.game = this.games[detail.item.getAttribute('index')];
					  var animation = this.$.slideleft;
					  animation.target = this.$.wrapperGameTitle;
					  animation.play();
				}
				
			}
		});
	</script>
</polymer-element>