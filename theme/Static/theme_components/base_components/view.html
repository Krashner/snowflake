<link rel="import" href="../bower_components/core-selector/core-selector.html">
<link rel="import" href="../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="snowflake-model.html">
<link rel="import" href="snowflake-controller-view.html">



<polymer-element name="snowflake-view">
  <script>
    Polymer('snowflake-view', {
		fKeys : function(o){
				return Object.keys(o);
			},
		ready: function() {
			window.debug = this;
			this.platformViews = [
				['namelist', 'Names'],
				['snamelist', 'Short Names']
			];
			this.gameViews = [
				['namelist', 'Names']
			];
		  }
		  
    });
  </script>
  <template>
  Hello World
	
	
	<core-animated-pages valueattr="mode" selected="{{displayMode}}">
		<section mode="games" style="position: relative;">
		<core-animated-pages valueattr="viewname" selected="{{selectedView}}">
			<section style="position: relative;" viewname="namelist">
				<core-selector selected="0" selectedModel="{{selectedGame}}">
					<template repeat="{{gamesModel}}">
						<div class="model-display">{{Name}}</div>
					</template>
				</core-selector>
			</section>
		</section>
		<section mode="platforms" style="position: relative;">
			<core-animated-pages valueattr="viewname" selected="{{selectedView}}">
			<section style="position: relative;" viewname="namelist">
				<core-selector style="position: relative;" selected="0" selectedModel="{{selectedPlatform}}">
					<template repeat="{{platformsModel}}">
						<div class="model-display">{{Name}}</div>
					</template>
				</core-selector>
			</section>
			<section style="position: relative;" viewname="snamelist">
				<core-selector style="position: relative;" selected="0" selectedModel="{{selectedPlatform}}">
					<template repeat="{{platformsModel}}">
						<div class="model-display">{{PlatformId}}</div>
					</template>
				</core-selector>
				</section>
			</core-animated-pages>
		</section>
  	</core-animated-pages>

	
	<core-selector valueattr="mode" selected="{{displayMode}}">
		<div mode="games">Games</div>
		<div mode="platforms">Platforms</div>
	</core-selector>
	
	<core-selector valueattr="viewname" selected="{{selectedView}}">
		<template repeat="{{currentViews}}">
				<div viewname="{{[0]}}">{{[1]}}</div>
		</template>
	</core-selector>
	
	
	<snowflake-model-data gamesModel="{{gamesModel}}" platformsModel="{{platformsModel}}" platformsQuery="{{platformsQuery}}" gamesQuery="{{gamesQuery}}"></snowflake-model-data>
	<snowflake-model-display selectedGame="{{selectedGame}}" selectedPlatform="{{selectedPlatform}}" displayModel="{{displayModel}}" displayMode="{{displayMode}}"></snowflake-model-display>
	<snowflake-controller-view platformViews="{{platformViews}}" gameViews="{{gameViews}}" currentViews="{{currentViews}}" displayMode="{{displayMode}}" selectedView="{{selectedView}}"></snowflake-controller-view>


	
	<h2>Unified</h2>
	{{displayModel.title}}<br>
	{{displayModel.description}}<br>
	{{displayModel.platform}}<br>

	<template repeat="{{obj in displayModel.table}}">
					<table>
						<template repeat="{{item in obj | fKeys}}">
						  <tr>
							  <th>{{item}}</th>
							  <td>{{obj[item]}}</td>
						  </tr>
						</template>
					</table>
  	</template>

	
  <!--Debug Start-->

  <!--Debug End-->

  <template>
</polymer-element>