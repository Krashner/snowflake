<link rel="import" href="../bower_components/core-icons/core-icons.html">
<link rel="import" href="../bower_components/core-icons/iconsets/av-icons.html">
<link rel="import" href="../bower_components/core-icon/core-icon.html">
<link rel="import" href="../bower_components/x-fontawesome/dist/x-fontawesome.html">
<link rel="import" href="static-fonts.html">

<polymer-element name="static-statusbar" attributes="keyword status">
	<template>		

		<style>
			.container{
				font-size: 14pt;
				position: absolute;
				right: 0;
				left: 0;
				color: white;
				height: 100%;
				vertical-align: text-bottom;
				-webkit-app-region: drag;
				text-transform: uppercase;
				cursor: default;
				overflow: hidden;
				font-family: 'RobotoDraft', sans-serif;
				font-weight: 100;
				line-height: 35px;

			}
		
			.text{
				width: 100%;
				position: absolute;
			}
			.container div{
				position: relative;
			}
			
			.status .text{
				text-align: right;
				margin-left: -10px;
			}
			.view .text{
				margin-left: 10px;
			}
			.view{
				width: 15%;
				background-color: #BFBFBF;
			}
			.status{
				background-color: #7F7F7F;
			}
			
			
			button{
				z-index: 100000;
				color: white;
				background: transparent;
				border: none;
				height: 100%;
			}
			
			button:focus{
				outline: none;
			}
			
			button:active{
				color: #dedede;
			}
			
			.buttoncontainer{
				position: absolute;
				top: 0;
				bottom: 0;
			}
			.view .buttoncontainer{
				right: 10px;
			}
			.status .buttoncontainer{
				width: 60%;
			}
			.status .buttoncontainer > input {
				width: 100%;
			}
			
			
			
			core-icon svg{
				width: 28px !important;
				height: 28px !important;
			}
			core-icon{
				width: 28px !important;
				height: 28px !important;
				top: 0;
				bottom: 0;
				
			}
			#input{
				background-color: inherit;
				border: none;
				outline: 0;
				padding: 0;
				color: inherit;
				z-index: 1000000;
				font-family: 'RobotoDraft';
				font-size: 12pt;
				line-height: 35px;
				vertical-align: middle;
				visibility: hidden;
				cursor: text;
				height: 100%;
			}
			#input.active{
				visibility: visible;
			}
			

			input[type="search"]::-webkit-search-decoration,
			input[type="search"]::-webkit-search-cancel-button {
				-webkit-appearance: none;
			}
		</style>
		
		<x-fontawesome></x-fontawesome>
		<div horizontal layout class="container" >
			<div flex none class="view">
				<span horizontal layout class="buttoncontainer">
					<button horizontal layout autofocus><core-icon class="buttons" icon="menu"></core-icon></button>
				</span>
				<span class="text">View</span>
				
			</div>
			<div horizontal layout flex one class="status">
				<span class="buttoncontainer" horizontal layout>
					<button horizontal layout autofocus on-click="{{searchActivate}}"><core-icon class="buttons" icon="search"></core-icon></button>
					<input type="search" on-blur="{{searchDeactivate}}" on-keydown="{{searchEvent}}" placeholder="search {{keyword}}s" id="input" autocomplete="off">
				</span>
				<span class="text">{{keyword}}{{status|fInsertHyphen}}{{status}}</span>

			</div>
		</div>
		
</template>
	<script>
		Polymer('static-statusbar', {
			fInsertHyphen: function(input){
				if (input == "" || input == undefined){
					return "";
				}else{
					return " â€” ";
				}
			},
			ready: function() {
				var statusbar = this; //todo move this into node snowflake object;
				window.addEventListener('keydown', function(e){
					if (event.which == 13 || event.keyCode == 13) {
						statusbar.searchActivate();
					}
				});
			},
			searchActivate: function(){
				this.$.input.setAttribute("class", "active");
				this.$.input.focus();
			},
			searchDeactivate: function(){
				this.$.input.setAttribute("class", "");
				this.$.input.blur();
				this.$.input.value = "";
			},
			searchEvent: function(event){
				if (event.which == 13 || event.keyCode == 13) {
					this.fire('snowflake-search', {query: this.$.input.value});
					this.searchDeactivate();
				}
				event.stopPropagation();
			}
			
		});
	</script>
</polymer-element>-->