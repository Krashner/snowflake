<link rel="import" href="static-mainbar.html">
<link rel="import" href="static-background.html">
<link rel="import" href="static-titlebar.html">
<link rel="import" href="static-statusbar.html">
<link rel="import" href="static-view-game-list.html">

<polymer-element name="static-model" attributes="barText barTitle barLogo barTable backgroundImage titleText themeMode statusText">
  <script>
    Polymer('static-model', {
		  ready: function() {
			this.barText = this.barText || "model.barText";
			this.barTitle = this.barTitle || "model.barTitle";
			this.barLogo = this.barLogo || "model.barLogo";
			this.backgroundImage = this.backgroundImage || "model.backgroundImage";
			this.barTable = this.barTable || [];
			this.titleText = this.titleText || "model.titleText";
			this.themeMode = this.themeMode || "model.themeMode";
			this.statusText = this.statusText || "model.statusText";
		  }
    });
  </script>
</polymer-element>


<polymer-element name="static-view">
	<template>

		<style>
			* /deep/ *::selection{
			  background: #dedede; /* WebKit/Blink Browsers */
			}
			:host{
				overflow: hidden;
				-webkit-user-select: none;
			}
			static-background{
				z-index: -10000;
				position: fixed;
				top: 0;
				bottom: 0;
				left: 0;
				right: 0;
			}
			static-mainbar{
				max-height: 30%;
				height: 30%;
				width: 100%;
				display: table-row;
				bottom: 0;
				right: 0;
				left: 0;
			}
			static-titlebar{
				display: table-row;
				height: 75px;
				z-index: 1000;
				width: 100%;
				position: relative;
			}
			static-statusbar{
				display: table-row;
				height: 35px;
				z-index: 1000;
				position: relative;
			}
			static-view-game-list{
				display: table-row;
				
				height: auto;
				width: 100%
				
			}
			.container{
				display: table;
				height: 100%;
				width: 100%;
				left: 0;
				right: 0;
				top: 0;
				bottom: 0;
			}
		</style>
		
		<static-model id="model" 
			titleText="{{titleText}}" 
			barText="{{barText}}" 
			barTitle="{{barTitle}}" 
			barLogo="{{barLogo}}" 
			backgroundImage="{{backgroundImage}}" 
			themeMode="{{themeMode}}" 
			statusText="{{statusText}}">
		</static-model>
		<div class="container">
		<static-titlebar titleText="{{titleText}}"></static-titlebar>
		<static-statusbar keyword="{{themeMode}}" status="{{statusText}}"></static-statusbar>
		<static-view-game-list selectedModel="{{selectedGame}}" on-model-changed="{{gameViewChanged}}"></static-view-game-list>
		<static-mainbar barText="{{barText}}" barTitle="{{barTitle}}" barLogo="{{barLogo}}" barTable="{{barTable}}"></static-mainbar>
		</div>
		<static-background backgroundImage="{{backgroundImage}}"><static-background>
</template>
	
	<script>
		Polymer('static-view', {
			ready: function() {
				this.barText = "someText";
				this.barTitle = "The Adventures of Jimmy Neutron, Boy Genius: Jimmy Neutron Vs. Jimmy Negatron"
				this.barLogo = "http://upload.wikimedia.org/wikipedia/commons/2/2c/SNES_logo.svg";
				this.backgroundImage = "http://static.tumblr.com/noynber/nN8n43by5/ffxv_lucis.jpg";
				this.barTable = [
					{
						"Platform": "test",
						"Release Date": "test",
						"Publisher": "test"
					},
					{
						"Last Played": "test",
						"You've played": "test"
					}
				];
			},
			gameViewChanged: function(event){
				var newValue = event.detail.newValue;
				this.barText = newValue.Metadata.game_description;
				this.barTitle = newValue.Metadata.game_title;
				this.titleText = newValue.PlatformId;
				this.barTable = [
					{
						"Platform": newValue.PlatformId,
						"Release Date": newValue.Metadata.game_releasedate,
						"Publisher": newValue.Metadata.game_publisher,
						"Developer": newValue.Metadata.game_developer
					},
					{
						"Last Played": "Never",
						"You've played": "0 hours"
					}
				];
				this.backgroundImage = newValue.Images.Fanarts[Math.floor(Math.random() * newValue.Images.Fanarts.length)][1];
								window.history.pushState("Snowflake - Game - " + newValue.Metadata.game_title, "Snowflake - Game - " + newValue.Metadata.game_title, "#game-"+newValue.UUID);

			}
			
		});
	</script>
</polymer-element>